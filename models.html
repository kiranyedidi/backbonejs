<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.0/backbone.localStorage-min.js" type="text/javascript"></script>
  </head>
  <body>
    <script type="text/javascript">
      var Vehicle = Backbone.Model.extend({
        validate: function(attributes){
          var validColors = ['white', 'red'];
          var isValidColor = function(attributes){
            if(!attributes.color) return true;
            return _.contains(validColors, attributes.color);
          }
          if(!isValidColor(attributes))
            return "Color must be one of " + validColors.join(', ');
        }
      });

      var car = new Vehicle();
      car.on('error', function(model, error){
        console.log(error);
      });
      car.set({
        type: 'ford',
        color: 'red'
      });
    </script>
  </body>
</html>
